(this.webpackJsonpcliente=this.webpackJsonpcliente||[]).push([[0],{110:function(e,t,a){e.exports=a(241)},115:function(e,t,a){},122:function(e,t){},124:function(e,t){},135:function(e,t){},137:function(e,t){},164:function(e,t){},166:function(e,t){},167:function(e,t){},173:function(e,t){},175:function(e,t){},193:function(e,t){},196:function(e,t){},212:function(e,t){},215:function(e,t){},241:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(109),l=a.n(r),o=(a(115),a(4)),s=a(7),u=a.n(s),m=a(12),i=function(e){var t=e.setrequest1State,a=Object(n.useState)(""),r=Object(o.a)(a,2),l=r[0],s=r[1],i=Object(n.useState)(""),p=Object(o.a)(i,2),E=p[0],f=p[1];return c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),function(){console.log("En saveSecreto"),console.log("SE VA A  GUARDAR UN SECRETO::",l,E);var e={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:l,shared_secret:E})};fetch("http://34.70.104.102:3001/credential",e).then(function(){var e=Object(m.a)(u.a.mark((function e(a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.text();case 2:n=e.sent,console.log("data::",n),a.ok||(console.log("ENTRO A QUE NO ESTA OK"),t((function(e){return!0})),setTimeout((function(){t((function(e){return!1}))}),2e3));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)}))}(),s(""),f("")}},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Key"),c.a.createElement("input",{value:l,onChange:function(e){s(e.target.value)},type:"text",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp"}),c.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"Esta es el nombre con que se va a recuperar el secreto.")),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Secret"),c.a.createElement("input",{type:"text",onChange:function(e){f(e.target.value)},className:"form-control",id:"exampleInputPassword1"})),c.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Agregar Secreto"))},p=(a(117),a(17)),E=a.n(p),f=function(e){var t=e.setrequest2State,a=e.setMessageRequest2,r=Object(n.useState)(""),l=Object(o.a)(r,2),s=l[0],i=l[1],p=Object(n.useState)(""),f=Object(o.a)(p,2),d=f[0],b=f[1],g=Object(n.useState)(""),v=Object(o.a)(g,2),N=v[0],h=v[1],O=Object(n.useState)(""),S=Object(o.a)(O,2),j=S[0],y=S[1],A=Object(n.useState)(""),x=Object(o.a)(A,2),C=x[0],R=x[1],T=Object(n.useState)(""),U=Object(o.a)(T,2),I=U[0],H=U[1],w=function(){var e=[];e.push("msg".concat(s)),e.push("tags".concat(d)),e.push("X-Route".concat(C)),e.sort();var t=e.reduce((function(e,t){return"".concat(e,";").concat(t)})),a=E.a.HmacSHA256(t,j).toString(E.a.enc.Hex);return console.log("SIGNATURA CALCULADA: "+a),H((function(e){return a})),a},D=function(){console.log("En saveMessage"),console.log("SE VA A GUARDAR UN MENSAJE CON",N,j,C,I,s,d);var e=w();H((function(t){return e}));var n={method:"POST",headers:{"Content-Type":"application/json","X-Key":N,"X-Route":C,"X-Signature":I},body:JSON.stringify({msg:s,tags:d})},c="http://34.70.104.102:3001/message";console.log("URL",c),fetch(c,n).then(function(){var e=Object(m.a)(u.a.mark((function e(n){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:c=e.sent,console.log("data::",c),n.ok?(console.log("BUSQUEDA POR ID SI FUNCIONO"),console.log(c)):(console.log("ENTRO A QUE NO ESTA OK",c.message),a((function(e){return c.message})),t((function(e){return!0})),setTimeout((function(){t((function(e){return!1}))}),3e3));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)}))};return c.a.createElement("div",null,c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-3"},c.a.createElement("input",{type:"text",placeholder:"KEY",onChange:function(e){h(e.target.value)},className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp"})),c.a.createElement("div",{className:"col-sm-3"},c.a.createElement("input",{type:"text",placeholder:"SECRET",onChange:function(e){y(e.target.value)},className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp"})),c.a.createElement("div",{className:"col-sm-3"},c.a.createElement("input",{type:"text",placeholder:"ROUTE",onChange:function(e){R(e.target.value)},className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp"})),c.a.createElement("div",{className:"col-sm-3"},c.a.createElement("input",{value:I,type:"text",placeholder:"SIGNATURA",onChange:function(e){H(e.target.value)},className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp"}))),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i(""),b(""),D()}},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Mensaje"),c.a.createElement("input",{value:s,onChange:function(e){i(e.target.value)},type:"text",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp"}),c.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"Contenido.")),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Tags"),c.a.createElement("input",{value:d,onChange:function(e){b(e.target.value)},type:"text",className:"form-control",id:"exampleInputPassword1"}),c.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"Separa los tags por un .(punto)")),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-2"},c.a.createElement("button",{type:"button",onClick:w,className:"btn btn-primary"},"Calcular signatura")),c.a.createElement("div",{className:"col-sm-3"},c.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Crear-Mensaje")))))},d=function(e){var t=e.mensaje;return console.log("%%%%%",t),c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-body"},c.a.createElement("h5",{className:"card-title"},t.id),c.a.createElement("p",{className:"card-text"},t.msg),c.a.createElement("p",{className:"card-text"},c.a.createElement("small",{className:"text-muted"},t.tags))))},b=function(e){var t=e.mensajes;return console.log("DESDE EL MessageGrid::",t),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"card-group"},t.map((function(e){return console.log("**********",e),c.a.createElement(d,{key:e.id,mensaje:e})}))))},g=function(e){var t=e.setmensajes,a=e.setrequest3State,r=e.setMessageRequest3,l=Object(n.useState)(""),s=Object(o.a)(l,2),i=s[0],p=s[1],f=Object(n.useState)(""),d=Object(o.a)(f,2),b=d[0],g=d[1],v=Object(n.useState)(""),N=Object(o.a)(v,2),h=N[0],O=N[1],S=Object(n.useState)(""),j=Object(o.a)(S,2),y=j[0],A=j[1],x=Object(n.useState)(""),C=Object(o.a)(x,2),R=C[0],T=C[1],U=Object(n.useState)(""),I=Object(o.a)(U,2),H=I[0],w=I[1],D=function(){var e=[];e.push("id".concat(i)),e.push("X-Route".concat(R)),e.sort();var t=e.reduce((function(e,t){return"".concat(e,";").concat(t)})),a=E.a.HmacSHA256(t,y).toString(E.a.enc.Hex);return console.log("SIGNATURA CALCULADA: "+a),w((function(e){return a})),a},k=function(){var e=[];e.push("tag".concat(b)),e.push("X-Route".concat(R)),e.sort();var t=e.reduce((function(e,t){return"".concat(e,";").concat(t)})),a=E.a.HmacSHA256(t,y).toString(E.a.enc.Hex);return console.log("SIGNATURA CALCULADA: "+a),w((function(e){return a})),a},q=function(){console.log("En buscar_id"),console.log("SE VA A BUSCAR UN MENSAJE CON ID::",h,y,R,H,i);var e=D();w((function(t){return e}));var n={method:"GET",headers:{"Content-Type":"application/json","X-Key":h,"X-Route":R,"X-Signature":H}},c="http://34.70.104.102:3001/message/"+i;console.log("URL",c),fetch(c,n).then(function(){var e=Object(m.a)(u.a.mark((function e(n){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:c=e.sent,console.log("data::",c),n.ok?(console.log("BUSQUEDA POR ID SI FUNCIONO"),console.log(c.msg),t((function(e){return[c]}))):(console.log("ENTRO A QUE NO ESTA OK",c.message),t((function(e){return[]})),r((function(e){return c.message})),a((function(e){return!0})),setTimeout((function(){a((function(e){return!1}))}),3e3));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)}))},G=function(){console.log("En buscar_id"),console.log("SE VA A BUSCAR UN MENSAJE CON TAG::",h,y,R,H,b);var e=k();w((function(t){return e}));var n={method:"GET",headers:{"Content-Type":"application/json","X-Key":h,"X-Route":R,"X-Signature":H}},c="http://34.70.104.102:3001/messages/".concat(b);console.log("URL",c),fetch(c,n).then(function(){var e=Object(m.a)(u.a.mark((function e(n){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:c=e.sent,console.log("data::",c),n.ok?(console.log("BUSQUEDA POR TAG SI FUNCIONO"),console.log(c.data),t((function(e){return c.data}))):(console.log("ENTRO A QUE NO ESTA OK",c.message),t((function(e){return[]})),r((function(e){return c.message})),a((function(e){return!0})),setTimeout((function(){a((function(e){return!1}))}),3e3));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)}))};return c.a.createElement("div",null,c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-3"},c.a.createElement("input",{type:"text",placeholder:"KEY",onChange:function(e){O(e.target.value)},className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp"})),c.a.createElement("div",{className:"col-sm-3"},c.a.createElement("input",{type:"text",placeholder:"SECRET",onChange:function(e){A(e.target.value)},className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp"})),c.a.createElement("div",{className:"col-sm-3"},c.a.createElement("input",{type:"text",placeholder:"ROUTE",onChange:function(e){T(e.target.value)},className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp"})),c.a.createElement("div",{className:"col-sm-3"},c.a.createElement("input",{value:H,type:"text",placeholder:"SIGNATURA",onChange:function(e){w(e.target.value)},className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp"}))),c.a.createElement("h4",null,"Buscar por ID"),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),q()}},c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-8"},c.a.createElement("label",null,"ID:"),c.a.createElement("input",{value:i,type:"text",onChange:function(e){p(e.target.value)},className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp"})),c.a.createElement("div",{className:"col-sm-4"}))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-2"},c.a.createElement("button",{type:"button",onClick:D,className:"btn btn-primary"},"Calcular signatura")),c.a.createElement("div",{className:"col-sm-2"},c.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Buscar")))),c.a.createElement("br",null),c.a.createElement("h4",null,"Buscar por TAG"),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),G()}},c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-8"},c.a.createElement("label",null,"TAG:"),c.a.createElement("input",{value:b,type:"text",onChange:function(e){g(e.target.value)},className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp"})))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-2"},c.a.createElement("button",{type:"button",onClick:k,className:"btn btn-primary"},"Calcular signatura")),c.a.createElement("div",{className:"col-sm-2"},c.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Buscar")))))},v=function(e){var t=e.requeststate,a=e.mensaje;return t?c.a.createElement("div",{className:"alert alert-danger",role:"alert"},a):null},N=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!1),s=Object(o.a)(l,2),u=s[0],m=s[1],p=Object(n.useState)(!1),E=Object(o.a)(p,2),d=E[0],N=E[1],h=Object(n.useState)(""),O=Object(o.a)(h,2),S=O[0],j=O[1],y=Object(n.useState)(!1),A=Object(o.a)(y,2),x=A[0],C=A[1],R=Object(n.useState)(""),T=Object(o.a)(R,2),U=T[0],I=T[1];return c.a.createElement("div",null,c.a.createElement("h2",null," Prueba nuestra API! "),c.a.createElement("h3",null," Crea una nuevo secreto.."),c.a.createElement(v,{requeststate:u,mensaje:"ERROR EN LA CREACION DE SECRETO! YA EXISTE.."}),c.a.createElement(i,{setrequest1State:m}," "),c.a.createElement("hr",null),c.a.createElement("h3",null," Crea una nuevo mensaje.."),c.a.createElement(v,{requeststate:x,mensaje:U}),c.a.createElement(f,{setrequest2State:C,setMessageRequest2:I}),c.a.createElement("hr",null),c.a.createElement("h3",null," Busca Un mensaje.."),c.a.createElement(v,{requeststate:d,mensaje:S}),c.a.createElement(g,{setmensajes:r,setrequest3State:N,setMessageRequest3:j}),c.a.createElement(b,{mensajes:a}),c.a.createElement("hr",null),c.a.createElement("ol",null))};l.a.render(c.a.createElement(N,null),document.getElementById("root"))}},[[110,1,2]]]);
//# sourceMappingURL=main.31e8db90.chunk.js.map